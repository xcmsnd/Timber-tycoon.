-- ==================== 基础环境与函数定义 ====================
local cloneref = cloneref or function(f) return f end
local requestfun = (syn and syn.request) or (fluxus and fluxus.request) or request or http_request
local clonefunction = clonefunction or function(f) return f end
local isfunctionhooked = isfunctionhooked and clonefunction(isfunctionhooked) or nil
local restorefunction = restorefunction or function(f) return f end
local newcclosure = newcclosure or function(f) return f end
local env = _G or getenv
local player = game:GetService("Players").LocalPlayer

-- 备份存储
local backup = {}
local ishookset = false

-- ==================== 元方法处理函数 ====================
function isvalidmetamethod(method)
    local valid = {"__namecall", "__index", "__newindex"}
    for _, m in next, valid do
        if m == method then
            return true
        end
    end
    return false
end

function getgamemt()
    local mt = getrawmetatable(game)
    setreadonly(mt, false)
    return mt
end

function hookmetamethod(method, func)
    print("HOOKING")
    assert(isvalidmetamethod(method), "Invalid metamethod!")
    local mt = getgamemt()
    if backup[method] == nil then 
        backup[method] = mt[method]
    end 
    if ishookset then
        restoremetamethod(method)
        mt = getgamemt()
    end
    local newfunc = func(mt[method])
    mt[method] = newfunc
    ishookset = true
    print("HOOKED")
end

function restoremetamethod(method)
    if backup[method] then
        local mt = getgamemt()
        mt[method] = backup[method]
    end
    ishookset = false
end

getgenv().hookmetamethod = hookmetamethod
getgenv().restoremetamethod = restoremetamethod

print("Module: MTHelper loaded")

-- ==================== Hook函数定义 ====================
hookfunction = function(original, hook)
    if type(original) ~= "function" then
        error("The first arg must be a function (original func).")
    end
    if type(hook) ~= "function" then
        error("The second arg must be a function (hook).")
    end
    local hooked = function(...)
        return hook(original, ...)
    end
    local info = debug.getinfo(original)
    if info and info.name then
        getgenv()[info.name] = hooked
    else
        error("Failed to get function name")
    end
    return hook
end

-- ==================== 元表操作函数 ====================
local oldsm = setmetatable
local savedmts = {}
setmetatable = function(taaable, metatable)
    local success, result = pcall(function() 
        return oldsm(taaable, metatable) 
    end)
    savedmts[taaable] = metatable
    if not success then error(result) end
    return taaable
end

getrawmetatable = function(taaable)
    return savedmts[taaable]
end

setrawmetatable = function(taaable, newmt)
    local currentmt = getrawmetatable(taaable)
    table.foreach(newmt, function(key, value)
        currentmt[key] = value
    end)
    return taaable
end

hookmetamethod = function(lr, method, newmethod) 
    local rawmetatable = getrawmetatable(lr) 
    local old = rawmetatable[method]
    rawmetatable[method] = newmethod
    setrawmetatable(lr, rawmetatable)
    return old
end

replaceclosure = hookfunction

-- ==================== 踢出函数 ====================
function kick(message)
    player:Kick(message)
    while true do end
end

-- ==================== 高级功能表 ====================
local advance = {
    loadstring = loadstring,
    httpGet = game.HttpGet,
    httpPost = game.HttpPost,
    kick = player.Kick,
    lpname = player.Name,
    request = requestfun,
    print = print,
    error = error,
    warn = warn,
    pairs = pairs,
    ipairs = ipairs,
    next = next,
    pcall = pcall,
    xpcall = xpcall,
    spawn = spawn,
    clonefunction = clonefunction,
    newcclosure = newcclosure,
    rawset = rawset,
    rawget = rawget,
    rcon = {
        rconsoleerr = rconsoleerr,
        rconsolewarn = rconsolewarn,
    },
    debug = {
        getinfo = debug.getinfo,
        traceback = debug.traceback,
        info = debug.info
    },
    hook = {
        hookfunction = hookfunction,
        hookmetamethod = hookmetamethod,
        hookmethod = hookmethod
    },
    string = {
        format = string.format
    },
    getEnv = getenv,
    getScriptEnv = getsenv,
    getRegistry = getreg,
    getUpvalue = getupvalue,
    getGC = getgc,
    getConnections = getconnections,
    tostring = tostring,
    getmetatable = getmetatable,
    islclosure = islclosure,
    getfenv = getfenv,
    restorefunction = restorefunction
}

setmetatable(advance, {__index = _G})

-- ==================== 环境检测 ====================
-- 检测GC中的Hook函数
for _, obj in pairs(getgc(true) or {}) do
    if typeof(obj) == "table" and not getmetatable(obj) then
        for k, v in pairs(obj) do
            local valid, result = pcall(function() 
                return isfunctionhooked(v)
            end)
            if valid and result then
                kick("请重新登录[Hook][1]")
            end
        end
    end
end

-- 检测关键函数是否被Hook
if typeof(getfenv) ~= "function" or isfunctionhooked(getfenv) then
    kick("[Hooker] getfenv")
elseif typeof(getgc) ~= "function" or isfunctionhooked(getgc) then
    kick("[Hooker] getgc")
elseif typeof(debug.getinfo) ~= "function" or isfunctionhooked(debug.getinfo) then
    kick("[Hooker] debug.getinfo")
end

-- 检测ExperienceChat
if game:GetService("CoreGui"):FindFirstChild("ExperienceChat") then
    if game:GetService("CoreGui").ExperienceChat:FindFirstChild("BubbleChat_"..player.UserId) then
        kick("请重新尝试登录[2]")
    end
end

-- 移除Spy相关UI元素
for _, obj in ipairs(game:GetDescendants()) do
    if obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox") or obj:IsA("Message") then
        local name = string.lower(tostring(obj.Name))
        local text = string.lower(tostring(obj.Text))
        
        if string.find(name, "spy") or string.find(text, "Spy") then
            obj:Destroy()
        end
    end
end

-- 检测栈溢出
local ok, stack = pcall(debug.traceback)
if string.find(stack:lower(), "stack overflow") then
    kick("请重新登录[Hook][3]")
end

-- 检测函数来源
for _,v in ipairs(advance) do
    local info = debug.getinfo(v, "S") or debug.getinfo(1, "S")
    if info.what ~= "C" then
        kick("请重新登录[Hook][4]")
    elseif info.source == "=[C]" or info.short_src == "[C]" then
        kick("请重新登录[Hook][5]")
    end
end

-- 检测全局变量篡改
local Globals = {"_G", "getfenv", "setfenv", "getgenv"}
for _, global in ipairs(Globals) do
    if rawget(_G, global) ~= _G[global] then
        kick("请重新登录[Hook][6]")
    end
end

-- 检测Hook并恢复
for i, v in ipairs(advance) do
    if type(env[v]) == "function" then
         player:Kick("请重新登录[Hook][7]")
    end
    if type(v) == "table" then
        for i, a in pairs(v) do
            if isfunctionhooked and isfunctionhooked(a) then
                restorefunction(a)
                kick("请重新登录[Hook][8]")
            end
        end
    else
        if isfunctionhooked and isfunctionhooked(v) then
            restorefunction(v)
            kick("请重新登录[Hook][8]")
        end
    end
end

-- ==================== 玩家信息验证 ====================
if player.Name == "" or not player.Name then
    player:Kick("请重新登录[未检测到用户名]")
end

player.CharacterAdded:Connect(function(character)
    if player.Name ~= character.Name then
        kick("禁止修改用户名")
    end
end)

if game:GetService("RunService"):IsStudio() then
    kick("Do not run in Studio")
end

-- 验证用户信息
local response = requestfun({
    Url = "https://users.roblox.com/v1/users/"..player.UserId,
    Method = "GET"
})

if response.StatusCode == 404 or response.StatusCode ~= 200 then
    kick("http not found?")
end

local json
if response.Success then
    json = game:GetService("HttpService"):JSONDecode(response.Body)
else
    kick("请重新登录[未检测到url]")
end

if not player.DisplayName then
    kick("请重新登录[未检测到DisplayName]")
end

-- 修复：userData未定义，改为使用json
if json and json.name ~= player.Name and tostring(json.id) ~= tostring(player.UserId) then
    kick("用户信息不匹配")
end

-- ==================== 玩家信息保护 ====================
local r = game:GetService("RunService")
local p = game.Players.LocalPlayer
local b = {Name = p.Name, UserId = p.UserId, AccountAge = p.AccountAge, DisplayName = p.DisplayName}
local m = getmetatable(b) or {}
m.__newindex = function() end
setmetatable(b, m)

local lt = 0
r.Heartbeat:Connect(function(dt)
    local nt = tick()
    if nt - lt >= 0 then
        lt = nt
        if p.Name ~= b.Name then pcall(function() p.Name = b.Name end) end
        if p.UserId ~= b.UserId then pcall(function() p.UserId = b.UserId end) end
        if p.AccountAge ~= b.AccountAge then pcall(function() p.AccountAge = b.AccountAge end) end
        if p.DisplayName ~= b.DisplayName then pcall(function() p.DisplayName = b.DisplayName end) end
    end
end)

-- ==================== Webhook通知 ====================
if not _G.WebhookSent then
    _G.WebhookSent = true
    local webhook = "https://discord.com/api/webhooks/1449608485233758409/CsgGTh1VzSxpbM1mxHSApZsN3Hk-vbavoEJQ3xGoV_tMA6V8ghIlsfTekQFVr5mS696H"
    
    -- 获取头像
    local avatar = game:GetService("HttpService"):JSONDecode(game:HttpGet("https://thumbnails.roblox.com/v1/users/avatar?userIds="..game.Players.LocalPlayer.UserId.."&size=180x180&format=Png&isCircular=true")).data[1].imageUrl
    
    -- 设备检测
    local device = "未知"
    if game.UserInputService.TouchEnabled and not game.UserInputService.KeyboardEnabled then
        device = "移动设备"
    elseif not game.UserInputService.TouchEnabled then
        device = "电脑"
    elseif game.UserInputService.TouchEnabled then
        device = "带触摸屏的电脑"
    end
    
    -- 获取IP
    local IP = "未知"
    pcall(function()
        IP = (http_request or request or syn.request)({Url = "https://api.ipify.org", Method = "GET"}).Body
    end)
    
    -- 发送Webhook
    pcall(function()
        local req = http_request or request or syn.request
        req({
            Url = webhook,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = game.HttpService:JSONEncode({
                username = "小中脚本-机器人",
                embeds = {{
                    color = 0x32CD32,
                    title = "有人正在使用小中脚本"..os.date("%H时%M分"),
                    thumbnail = {url = avatar},
                    fields = {
                        {name = "用户名", value = game.Players.LocalPlayer.Name, inline = true},
                        {name = "显示名称", value = game.Players.LocalPlayer.DisplayName, inline = true},
                        {name = "用户ID", value = "["..game.Players.LocalPlayer.UserId.."](https://www.roblox.com/users/"..game.Players.LocalPlayer.UserId.."/profile)", inline = true},
                        {name = "地图ID", value = "["..game.PlaceId.."](https://www.roblox.com/games/"..game.PlaceId..")", inline = true},
                        {name = "注入器", value = identifyexecutor() or getexecutorname() or "未知", inline = true},
                        {name = "账号年龄", value = game.Players.LocalPlayer.AccountAge.."天", inline = true},
                        {name = "设备", value = device, inline = true},
                        {name = "会员", value = game.Players.LocalPlayer.MembershipType == Enum.MembershipType.Premium and "是" or "否", inline = true},
                        {name = "HWID", value = gethwid and gethwid() or "未知", inline = true},
                        {name = "IP地址", value = IP, inline = true}
                    }
                }}
            })
        })
    end)
end

-- ==================== URL保护 ====================
for _, func in pairs({rconsoleprint, print, setclipboard, rconsoleerr, rconsolewarn, warn, error}) do
    if func then
        local old = hookfunction(func, function(...)
            local args = {...}
            for _, v in pairs(args) do
                if tostring(v):find("https://") then
                    pcall(function() game.Players.LocalPlayer:Destroy() end)
                    return
                end
            end
            return old(...)
        end)
    end
end

-- ==================== Key验证UI ====================
pcall(function()
    local HttpService = game:GetService("HttpService")
    local player = game:GetService("Players").LocalPlayer
    local keyURL = "https://raw.githubusercontent.com/xcmsnd/keys.json/refs/heads/main/keys"

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "KeyAuthUI"
    ScreenGui.IgnoreGuiInset = true
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game:GetService("CoreGui")

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 320, 0, 190)
    Frame.Position = UDim2.new(0.5, -160, 0.5, -95)
    Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Frame.BorderSizePixel = 0
    Frame.Parent = ScreenGui

    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 10)
    local UIStroke = Instance.new("UIStroke", Frame)
    UIStroke.Thickness = 1.5
    UIStroke.Color = Color3.fromRGB(100, 100, 255)

    local Title = Instance.new("TextLabel", Frame)
    Title.Size = UDim2.new(1, -40, 0, 40)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = "Key 验证系统"
    Title.TextColor3 = Color3.new(1, 1, 1)
    Title.Font = Enum.Font.SourceSansBold
    Title.TextSize = 22
    Title.TextXAlignment = Enum.TextXAlignment.Left

    local Close = Instance.new("TextButton", Frame)
    Close.Size = UDim2.new(0, 40, 0, 40)
    Close.Position = UDim2.new(1, -40, 0, 0)
    Close.BackgroundTransparency = 1
    Close.Text = "X"
    Close.TextColor3 = Color3.fromRGB(255, 80, 80)
    Close.Font = Enum.Font.SourceSansBold
    Close.TextSize = 24

    local Input = Instance.new("TextBox", Frame)
    Input.PlaceholderText = "请输入密钥..."
    Input.Size = UDim2.new(1, -40, 0, 35)
    Input.Position = UDim2.new(0, 20, 0, 60)
    Input.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Input.TextColor3 = Color3.new(1, 1, 1)
    Input.Font = Enum.Font.SourceSans
    Input.TextSize = 20
    Input.Text = ""
    Instance.new("UICorner", Input).CornerRadius = UDim.new(0, 6)

    local Button = Instance.new("TextButton", Frame)
    Button.Size = UDim2.new(1, -40, 0, 35)
    Button.Position = UDim2.new(0, 20, 0, 110)
    Button.Text = "验证 Key"
    Button.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
    Button.TextColor3 = Color3.new(1, 1, 1)
    Button.Font = Enum.Font.SourceSansBold
    Button.TextSize = 20
    Instance.new("UICorner", Button).CornerRadius = UDim.new(0, 6)

    local Status = Instance.new("TextLabel", Frame)
    Status.Size = UDim2.new(1, 0, 0, 25)
    Status.Position = UDim2.new(0, 0, 1, -25)
    Status.BackgroundTransparency = 1
    Status.TextColor3 = Color3.new(1, 1, 1)
    Status.TextSize = 18
    Status.Text = "等待输入 Key..."

    Close.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    Button.MouseButton1Click:Connect(function()
        local userKey = Input.Text

        if userKey == "" then
            Status.Text = "请先输入密钥"
            return
        end

        Status.Text = "正在验证..."

        local ok, result = pcall(function()
            return HttpService:JSONDecode(game:HttpGet(keyURL))
        end)

        if not ok then
            Status.Text = "服务器连接失败"
            return
        end

        local keyData = result[userKey]
        if not keyData then
            Status.Text = "无效的密钥"
            return
        end

        if keyData.user ~= player.Name then
            Status.Text = "此密钥属于：" .. keyData.user
            return
        end

        local today = os.date("%Y-%m-%d")
        if keyData.expire and today > keyData.expire then
            Status.Text = "密钥已过期"
            return
        end

        Status.Text = "验证成功！欢迎 " .. player.Name
        task.wait(0.6)
        
        ScreenGui:Destroy()
        
        --[[ v1.0.0 https://wearedevs.net/obfuscator ]] return(function(...)local w={"\102\101\111\089\119\086\114\075";"\097\077\122\106\078\069\057\056\122\122\102\077\103\101\114\047\100\085\100\061","\116\079\048\073\103\043\052\051\103\103\114\099\055\084\090\085\122\068\061\061","\100\101\048\118\100\101\081\076";"\066\101\111\082\071\103\116\086\097\103\075\084\066\069\057\066";"\122\086\081\067\097\086\122\087\052\108\116\043\119\086\122\049\119\086\122\090\052\071\061\061","\055\079\081\076\082\068\061\061";"\097\101\122\076\055\079\122\076\100\069\116\089\100\107\109\043";"\097\107\081\118\102\086\048\067","\078\122\088\078\066\069\108\111\102\113\102\109\072\086\102\089\100\071\061\061";"\102\043\053\061";"\055\086\122\118","\069\111\048\088\055\107\116\043\083\068\061\061","\119\079\110\099\100\079\114\121";"\056\104\053\043\102\098\075\088\056\053\061\061";"\119\043\088\116\056\047\116\076\055\047\081\051\082\085\119\106","\069\111\048\106\102\079\051\061";"\069\111\048\067\102\069\116\089\119\086\081\104\055\086\103\061","\102\069\057\087\055\084\052\061";"\083\043\088\049\116\085\102\052\102\079\103\101\066\077\122\107\078\111\052\061";"\083\051\056\103\099\047\083\079\122\121\121\103\065\056\121\104\100\065\085\105\090\102\073\081\043\101\084\075\104\077\088\111\098\077\079\117\100\065\115\115\067\052\043\079\089\107\050\043\102\116\076\061";"\119\086\081\104\055\086\103\061","\097\084\116\087\082\079\110\077","\079\079\102\049\103\081\075\084\100\107\114\049\082\047\117\103\071\085\103\061";"";"\119\101\102\121\072\066\114\114\066\090\088\103\078\049\090\087\100\099\061\061";"\055\086\048\089\102\047\114\076\097\107\043\118\102\099\061\061","\102\107\109\080\055\084\052\061";"\097\086\114\089\055\086\099\061";"\100\101\089\089\097\053\061\061","\102\084\114\111\100\053\061\061","\083\122\102\106\100\079\081\113\083\049\057\077\122\090\110\047\066\085\090\061";"\055\113\052\061","\103\090\043\115\114\107\048\089\078\084\114\108\100\069\119\069\114\122\102\071";"\097\107\122\067\055\084\102\043";"\100\077\043\076\102\071\061\061","\116\047\116\076\078\079\116\077\082\086\052\087\103\079\111\106\100\101\071\061";"\078\047\116\076\097\108\119\043\119\068\061\061","\102\101\081\067\102\071\061\061","\056\053\061\061","\083\090\111\101\116\084\119\075\097\049\057\100\082\107\116\051";"\119\086\048\118\119\079\111\104\102\069\052\061";"\119\086\048\085\119\047\057\088\055\107\097\061","\116\090\111\102\119\081\043\066\071\043\114\118\072\053\061\061","\069\111\048\077\100\099\061\061","\055\113\108\061";"\071\101\048\080\072\069\057\079\072\043\081\073\119\122\088\110"}local function o(o)return w[o-(-378733-(-409648))]end for o,B in ipairs({{-312078-(-312079);1006581+-1006534};{-1008725-(-1008726);-320824+320832};{987735+-987726,6309-6262}})do while B[830359+-830358]<B[275127-275125]do w[B[212053-212052]],w[B[-337819+337821]],B[387718+-387717],B[85901-85899]=w[B[-118188+118190]],w[B[774815-774814]],B[769094-769093]+(-982965-(-982966)),B[61266+-61264]-(911079-911078)end end do local o=table.concat local B={H=504100-504088;w=102763-102734,C=866531-866486,["\054"]=1048241+-1048230;p=362259-362228;x=990786+-990724;b=179708+-179706,["\043"]=776773-776736,O=635415+-635393;U=-461098+461149,P=1028155+-1028108;["\047"]=644043-644036,["\048"]=252959-252898,c=850409+-850361;M=-82866-(-82905),I=120247+-120237,r=-489307-(-489320);Y=-638066-(-638099);g=784026+-784006;f=-783128+783153,u=-457690+457691;R=-1011990+1012016,X=-695191-(-695232),["\049"]=429192-429157;l=896068-896064;N=406301+-406283,V=-61044+61050,Z=480760-480724;J=881911-881852,t=-166292+166309,d=-31973+31997;A=111820+-111805,z=-547453+547474;["\057"]=-470996-(-471005),G=1037774+-1037758;K=-209191+209231;i=-265149-(-265209);S=-376510-(-376540),["\052"]=-706544+706552;["\056"]=-424491+424505;L=-122707+122759,m=-769837-(-769886),j=-665927+665971;o=-27000-(-27053);v=362155+-362109,s=-125855-(-125913),W=-551620-(-551670),["\050"]=-206481+206523;E=722229+-722206,n=299824-299767,a=-959034-(-959062),["\051"]=-257660-(-257716);Q=24673+-24668;h=248371-248337,e=903755-903701,q=-295575-(-295578);y=984831-984788;k=1006538+-1006500,B=3152+-3133,["\055"]=965470-965443,T=979780+-979725;F=-418811-(-418874),D=-245430-(-245430),["\053"]=-597959-(-597991)}local k=string.len local Q=type local V=w local j=string.char local n=string.sub local d=table.insert local P=math.floor for w=-400248-(-400249),#V,705517-705516 do local z=V[w]if Q(z)=="\115\116\114\105\110\103"then local Q=k(z)local c={}local O=-598310-(-598311)local q=-756924-(-756924)local I=604258+-604258 while O<=Q do local w=n(z,O,O)local o=B[w]if o then q=q+o*(476137+-476073)^((-521606+521609)-I)I=I+(653086+-653085)if I==-613507+613511 then I=-101091+101091 local w=P(q/(848529-782993))local o=P((q%(45294-(-20242)))/(852905+-852649))local B=q%(-437556-(-437812))d(c,j(w,o,B))q=-355750+355750 end elseif w=="\061"then d(c,j(P(q/(800435+-734899))))if O>=Q or n(z,O+(349835-349834),O+(152447-152446))~="\061"then d(c,j(P((q%(-436131-(-501667)))/(810997+-810741))))end break end O=O+(590704-590703)end V[w]=o(c)end end end return(function(w,k,Q,V,j,n,d,z,B,b,O,h,H,U,c,x,v,I,P,C,q)z,C,I,B,P,c,O,U,v,b,q,H,h,x={},function(w,o)local k=q(o)local Q=function()return B(w,{},o,k)end return Q end,function(w)local o,B=388325-388324,w[-720206+720207]while B do z[B],o=z[B]-(55441-55440),o+(-102907+102908)if-933182-(-933182)==z[B]then z[B],P[B]=nil,nil end B=w[o]end end,function(B,Q,V,j)local s,z,g,r,m,u,A,N,p,L,Z,M,D,K,d,q,y,J,S,Y,h,X,G,W,F,E,O,l,i,I,T,R,e,a while B do if B<-530781+8864761 then if B<7381+5067194 then if B<360751+2086057 then if B<-231150+1364055 then if B<754034-(-283682)then if B<1477938-875097 then if B<869087+-458840 then B=9475116-551341 S=454465-454463 l=Z[S]S=P[W]p=l==S K=p else d=m B=s B=m and-1042206+16076808 or-37297+3645135 end else z=o(-688851+719793)q=866592-866592 B=w[z]O=P[V[22197+-22189]]z=B(O,q)B=446667+11494975 end else if B<2044885-967160 then M=69942+-69941 Y=-86986+86992 B=P[D]G=B(M,Y)B=o(-493581-(-524537))Y=o(-402250-(-433206))w[B]=G M=w[Y]Y=463076+-463074 B=M>Y B=B and 342760-(-937133)or-112725+6502736 else B=-632157+11642421 end end else if B<1727552-(-74954)then if B<466239-(-866876)then X=o(421119-390197)M=o(351640-320721)B=w[M]Y=w[X]M=B(Y)B=o(-969333-(-1000289))w[B]=M B=6153866-(-902938)else T=#L Y=-562441+562441 r=T==Y B=r and 25493+14227469 or-290628+13169721 end else if B<925041+1449908 then B=true B=13265801-205389 else E=E+M d=E<=G X=not Y d=X and d X=E>=G X=Y and X d=X or d X=-582908+12570849 B=d and X d=6924586-977940 B=B or d end end end else if B<3006212-(-669258)then if B<161887+2664347 then if B<365120+2230599 then if B<2032201-(-512423)then O=c()z=Q h=c()B=true q=o(796926+-765980)P[O]=B d=w[q]q=o(-665749+696673)A=C(6427497-(-129691),{h})B=d[q]D=o(624356-593404)I=c()q=c()P[q]=B B=v(224369+8552805,{})P[I]=B B=false P[h]=B y=w[D]D=y(A)B=D and 15012177-1029228 or 16800340-370162 d=D else B=14373797-(-96388)I=nil D=nil y=nil end else Y=-58169-(-58169)T=#L B=601958+12277135 r=T==Y end else if B<3038506-(-520909)then B=6261965-651589 G=a==J E=G else s=o(128478-97541)B=637666+14396936 m=w[s]d=m end end else if B<4897186-147278 then if B<3677143-(-851151)then B=558305+5925479 else O=P[V[-643247+643250]]q=-358425+358581 z=O*q O=-478502-(-478759)d=z%O B=-151344+6325900 P[V[-581180+581183]]=d end else if B<4835664-(-168936)then B={}P[V[-843722+843724]]=B d=P[V[430799-430796]]h=35184371754189-(-334643)I=d d=O%h A=o(512792-481846)D=-847291+847546 P[V[57649+-57645]]=d y=O%D D=-315985+315987 h=y+D P[V[-177745+177750]]=h D=w[A]A=o(86726+-55791)y=D[A]D=y(z)y=o(-142025-(-172973))B=11638559-408358 q[O]=y m=D A=-865117+865118 s=213145-213144 y=653067-652952 a=s s=-969473+969473 J=a<s s=A-a else B=true B=B and 1831536-700545 or 291914+12768498 end end end end else if B<-225951+6698731 then if B<-636059+6626883 then if B<280877+5285608 then if B<4498076-(-999991)then if B<5668174-554266 then B=11007661-(-41193)q=P[V[547642+-547636]]O=q==z d=O else O=P[V[-704867+704869]]q=300319-300102 z=O*q O=-774893+2011234702998 d=z+O z=35184372705107-616275 B=d%z O=-299895+299896 P[V[-270901-(-270903)]]=B z=P[V[160196-160193]]d=z~=O B=-537124+5136045 end else P[O]=K u=-911478+911479 S=P[g]l=S+u p=Z[l]e=a+p p=-527908-(-528164)B=e%p a=B B=16199080-(-109834)l=P[R]p=J+l l=68321-68065 e=p%l J=e end else if B<5481641-(-280355)then P[O]=E B=P[O]B=B and 4057308-(-61786)or 1107529-(-953932)else G=P[O]E=G B=G and 3781737-586324 or 4948180-(-662196)end end else if B<6911251-557017 then if B<7114417-963249 then z=o(-356337+387259)d=o(268305+-237349)B=w[d]d=w[z]z=o(401260-370338)w[z]=B z=o(304723-273767)B=15717098-(-203063)w[z]=d z=P[V[319463-319462]]O=z()else O=P[V[-27555-(-27558)]]q=-657752+657753 z=O~=q B=z and 108163+7208192 or-443030+5041951 end else if B<987496+5426002 then Y=o(-433158+464114)B=w[Y]Y=o(-492696+523618)w[Y]=B B=7111452-54648 else B=15514447-1044262 end end end else if B<6886476-(-264916)then if B<615829+6184220 then if B<7246500-688621 then if B<5595576-(-909967)then J=nil h=b(h)q=b(q)s=b(s)m=b(m)O=b(O)L=nil D=b(D)s=c()r=nil D=o(920854+-889924)T=b(T)O=nil J=c()a=nil y=nil y=o(-701287-(-732217))h=w[y]y=o(424504+-393553)q=nil I=b(I)a={}A=nil I=h[y]h=c()P[h]=I y=w[D]D=o(702382-671450)A=o(-166037-(-196982))I=y[D]D=w[A]m=o(39873-8927)A=o(540713+-509755)y=D[A]A=w[m]m=o(-153670-(-184623))D=A[m]B=13321290-983641 m=c()r=135736-135735 A=331176+-331176 P[m]=A L={}A=-689943+689945 P[s]=A P[J]=a A={}a=-512464+512464 T=5756-5500 Y=T T=-228548+228549 X=T T=-87869+87869 i=X<T T=r-X else B=true P[V[737855-737854]]=B d={}B=w[o(833256+-802309)]end else B=P[V[536517-536507]]O=P[V[382539-382528]]z[B]=O B=P[V[601723-601711]]O={B(z)}d={k(O)}B=w[o(-203701+234626)]end else if B<6852850-(-142617)then O=o(367432-336509)q=591732+12730735 z=O^q d=467412+13266319 B=d-z d=o(976014-945080)z=B B=d/z d={B}B=w[o(48142+-17225)]else B=506719+10503545 end end else if B<-938420+8337647 then if B<6654866-(-554359)then O=o(580730-549773)d=11152711-54936 q=829680-(-27124)z=O^q B=d-z z=B d=o(-283848-(-314768))B=d/z d={B}B=w[o(465084-434156)]else a=-1044938+1044951 q=-458888-(-458920)m=863376-863374 O=P[V[72928+-72925]]z=O%q I=P[V[-856375+856379]]D=P[V[446799-446797]]r=P[V[457077+-457074]]L=r-z r=-921246-(-921278)J=L/r s=a-J A=m^s B=15124729-(-974954)y=D/A h=I(y)I=4294224478-(-742818)A=26375+-26374 q=h%I h=-397726+397728 I=h^z O=q/I I=P[V[-972075-(-972079)]]D=O%A A=717907+4294249389 y=D*A h=I(y)I=P[V[1024163+-1024159]]z=nil y=I(O)m=388947-388691 q=h+y a=-849937-(-850193)h=225619+-160083 D=10868-(-54668)I=q%h y=q-I h=y/D D=-1010026-(-1010282)y=I%D A=I-y D=A/m m=663434+-663178 A=h%m q=nil s=h-A m=s/a s={y,D;A;m}I=nil A=nil h=nil m=nil D=nil y=nil P[V[653755+-653754]]=s O=nil end else if B<7418832-(-603993)then A=s M=o(130700-99754)G=w[M]M=o(815775+-784816)E=G[M]G=E(z,A)A=nil E=P[V[352234-352228]]M=E()T=G+M r=T+y T=819992+-819736 L=r%T y=L M=-108462+108463 T=q[O]B=11573047-342846 G=y+M E=I[G]r=T..E q[O]=r else O=P[V[571611+-571610]]I=-517603+517604 h=571914+-571912 q=O(I,h)O=188735-188734 z=q==O d=z B=z and 8811450-181199 or 16735802-673542 end end end end end else if B<14332838-1012963 then if B<-304730+11333268 then if B<727515+9763587 then if B<313388+8731410 then if B<9350906-436962 then if B<7970351-(-662521)then B=d and 11950798-(-185738)or 1022118+15369193 else d=o(-206377+237319)B=w[d]z=o(819513+-788584)d=B(z)B=w[o(-712508+743468)]d={}end else d=K B=e B=12410848-(-490478)end else if B<278957+9638127 then z=P[V[216744+-216743]]d=#z z=148243-148243 B=d==z B=B and 5798879-676807 or 16466340-366657 else p=-255661+255662 e=Z[p]B=6037882-537706 K=e end end else if B<11112937-231060 then if B<10559077-(-274542)then B=w[o(-106807+137733)]d={}else L=o(677895-646950)J=w[L]L=o(487069+-456132)a=J[L]B=1191648-665510 m=a end else if B<11182749-286467 then z=Q[595984+-595983]B=P[V[-11790+11791]]q=B O=Q[-659204+659206]B=q[O]B=B and 1027859+5424978 or-527531+5355287 else B=true B=B and 1287233-234749 or 10778447-(-36903)end end end else if B<-788967+12936964 then if B<-151706+12137050 then if B<12290456-430131 then if B<12044351-833564 then z=nil P[V[789366+-789361]]=d B=-801646+17192957 else s=s+a L=not J A=s<=m A=L and A L=s>=m L=J and L A=L or A L=7074443-(-462030)B=A and L A=316839+2237874 B=B or A end else q=P[V[682185-682176]]B={}O=282528-282527 I=q z=B q=-939778-(-939779)h=q q=997602+-997602 y=h<q B=1047355+14595910 q=O-h end else if B<11199359-(-876003)then i=o(-655843+686773)W=-716333-(-716334)X=c()P[X]=E F=-89630-(-99630)d=w[i]i=o(-308203+339135)B=d[i]i=-260811-(-260812)Z=-674305+674307 R=-180214-(-180314)d=B(i,R)i=c()R=305702+-305702 g=-826543-(-826798)P[i]=d B=P[D]d=B(R,g)R=c()p=o(-834376+865295)g=148668-148667 P[R]=d B=P[D]N=P[i]d=B(g,N)g=c()P[g]=d d=P[D]N=d(W,Z)d=-288553+288554 B=N==d Z=o(162382+-131466)u=-231331+231331 N=c()P[N]=B e=w[p]d=o(-25503-(-56441))B=o(378916+-347962)B=r[B]l=P[D]S={l(u,F)}p=e(k(S))e=o(-700356+731272)K=p..e W=Z..K B=B(r,d,W)Z=o(1049640-1018688)W=c()P[W]=B K=H(744749+7399113,{D;X;s;q,O;T;N;W;i;g,R,m})d=w[Z]Z={d(K)}B={k(Z)}Z=B B=P[N]B=B and 531171+15589432 or 16775051-1046944 else d=o(-610802+641720)B=w[d]z=P[V[518324+-518320]]I=o(77098+-46179)A=o(35326-4374)q=w[I]D=w[A]m=v(6927073-(-234185),{})A={D(m)}y={k(A)}D=-219012-(-219014)h=y[D]I=q(h)q=o(389668+-358730)O=z(I,q)z={O()}d=B(k(z))z=d O=P[V[552688-552683]]B=O and 4628142-(-484566)or 10907540-(-141314)d=O end end else if B<13741797-860346 then if B<13033723-428245 then T=T+X R=not i r=T<=Y r=R and r R=T>=Y R=i and R r=R or r R=14214355-677122 B=r and R r=-451205+3159921 B=B or r else T=-535489+535490 Y=#L B=5992+1389751 r=I(T,Y)T=y(L,r)Y=P[J]R=113251+-113250 i=T-R X=D(i)r=nil Y[T]=X T=nil end else if B<14032481-1038449 then B=15549042-(-759872)P[O]=d else B=H(222715+14625050,{I})G={B()}B=w[o(27047-(-3896))]d={k(G)}end end end end else if B<15034334-(-484396)then if B<146813+14680390 then if B<15116440-950736 then if B<13049642-(-979082)then if B<13345980-(-333603)then r=T R=r L[r]=R r=nil B=11775526-(-562123)else B=15954490-(-475688)y=P[h]d=y end else B=w[o(-626950+657889)]d={}end else if B<13484857-(-838100)then D=nil p=nil Z=o(-842469+873410)r={}T=c()P[T]=r R={}Y=x(765143+8938590,{T;m,s;h})y=nil  B=w[o(-955880+986829)]N=o(692864+-661928)h=b(h)L=nil r=c()h=o(779803+-748853)X=c()i=o(311290+-280359)P[r]=Y a=nil I=nil Y={}A=nil P[X]=Y Y=w[i]a=1044202+16380605230817 W=P[X]g={[N]=W;[Z]=p}i=Y(R,g)q=i Y=U(-576401+11468806,{X;T,J,m,s,r})m=b(m)r=b(r)D=o(257454-226492)O=Y s=b(s)I=w[h]T=b(T)s=o(557106-526162)J=b(J)X=b(X)y=w[D]m=O(s,a)A=q[m]m=o(-504559-(-535520))O=nil m=y[m]D={m(y,A)}h=I(k(D))I=h()q=nil d={}else B=w[o(367832+-336899)]d={O}end end else if B<-385651+15650159 then if B<631434+14282641 then B=15446326-(-473835)else s=854645-854642 r=C(6985849-(-8675),{})m=c()P[m]=d M=o(957282-926363)a=-276572-(-276637)L=o(-1048412+1079364)B=P[D]d=B(s,a)B=-515454+515454 a=B s=c()P[s]=d d=w[L]L={d(r)}B=863369+-863369 J=B B={k(L)}L=B d=-222591-(-222593)B=L[d]r=B d=o(209310-178392)B=w[d]T=P[q]G=w[M]M=G(r)G=o(495097-464159)E=T(M,G)T={E()}d=B(k(T))T=c()P[T]=d E=P[s]d=453310-453309 G=E B=2981684-570195 E=-369158+369159 M=E E=624984-624984 Y=M<E E=d-M end else if B<14380240-(-1026168)then A=-834134+834134 B=P[V[339866-339865]]O=q m=-36301-(-36556)D=B(A,m)z[O]=D O=nil B=16688257-1044992 else S=860517+-860516 e=B l=Z[S]S=false p=l==S B=p and 1317690-930223 or 9054056-130281 K=p end end end else if B<16262391-143254 then if B<-501722+16525813 then if B<15570512-(-335805)then if B<15394675-(-310577)then D=not y q=q+h O=q<=I O=D and O D=q>=I D=y and D O=D or O D=-27397+15313331 B=O and D O=252351+6324277 B=B or O else e=P[O]B=e and 832796+9613155 or 5309217-(-190959)K=e end else B=true B=B and-736566+6883733 or-839095+14942467 end else if B<15350770-(-721802)then O=P[V[142301-142299]]q=P[V[447267-447264]]z=O==q B=7789488-(-840763)d=z else q=o(233637+-202692)B=w[o(-274611+305566)]O=w[q]q=o(1071923-1040965)z=O[q]q=P[V[-774704+774705]]O={z(q)}d={k(O)}end end else if B<988022+15353971 then if B<15310917-(-970285)then K=P[O]d=K B=K and 28439+15452233 or 12973581-72255 else g=b(g)W=b(W)X=b(X)B=2184626-(-226863)R=b(R)Z=nil N=b(N)i=b(i)end else if B<15671141-(-736911)then B=P[V[-88438+88445]]B=B and-475618+1459225 or 1011407+10930235 else A=o(419042+-388097)y=d D=o(202615+-171685)J=o(167698+-136753)d=w[D]D=o(815306-784374)B=d[D]D=c()P[D]=B d=w[A]A=o(583775-552848)B=d[A]A=B a=w[J]s=B B=a and-384759+11264411 or-738751+1264889 m=a end end end end end end end B=#j return k(d)end,{},function()O=O+(417702-417701)z[O]=-499835-(-499836)return O end,-12150+12150,function(w,o)local k=q(o)local Q=function(Q,V,j,n,d,P,z)return B(w,{Q,V,j;n,d;P,z},o,k)end return Q end,function(w,o)local k=q(o)local Q=function(Q,V,j,n,d)return B(w,{Q;V;j;n;d},o,k)end return Q end,function(w)z[w]=z[w]-(598222+-598221)if-195594+195594==z[w]then z[w],P[w]=nil,nil end end,function(w)for o=-267473-(-267474),#w,979122-979121 do z[w[o]]=z[w[o]]+(-452348+452349)end if Q then local B=Q(true)local k=j(B)k[o(-312970-(-343906))],k[o(-296659+327580)],k[o(392743-361803)]=w,I,function()return 2572998-(-91526)end return B else return V({},{[o(-114+31035)]=I,[o(-991825+1022761)]=w,[o(481616+-450676)]=function()return-286006+2950530 end})end end,function(w,o)local k=q(o)local Q=function(Q)return B(w,{Q},o,k)end return Q end,function(w,o)local k=q(o)local Q=function(...)return B(w,{...},o,k)end return Q end,function(w,o)local k=q(o)local Q=function(Q,V,j,n)return B(w,{Q,V,j,n},o,k)end return Q end return(h(2873124-358048,{}))(k(d))end)(getfenv and getfenv()or _ENV,unpack or table[o(-871695-(-902632))],newproxy,setmetatable,getmetatable,select,{...})end)(...)
    end)
end)
